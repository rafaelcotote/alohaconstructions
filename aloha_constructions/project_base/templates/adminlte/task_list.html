{% extends 'adminlte/base.html' %}
{% load static %}

{% block conteudo %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i class="ion ion-clipboard mr-1"></i>
            To Do List
        </h3>
    </div>
    <div class="card-body">
        <a href="{% url 'new_task' %}" class="btn btn-primary mb-2">Nova Tarefa</a>
        <ul class="todo-list" data-widget="todo-list">
            {% for task in tasks %}
            <li>
                <span class="handle">
                    <i class="fas fa-ellipsis-v"></i>
                    <i class="fas fa-ellipsis-v"></i>
                </span>
                <!-- Checkbox -->
                <div class="icheck-primary d-inline ml-2">
                    <input type="checkbox" value="{{ task.id }}" id="todoCheck{{ task.id }}">
                    <label for="todoCheck{{ task.id }}"></label>
                </div>
                <!-- Task Text -->
                <span class="text">{{ task.text }}</span>
                <!-- Badge com estimativa de tempo -->
                <small class="badge badge-{{ task.label_color }}">
                    <i class="far fa-clock"></i> {{ task.estimated_time }}
                </small>
                <!-- Ferramentas: Editar e Excluir -->
                <div class="tools">
                    <a href="{% url 'edit_task' task.id %}" class="fas fa-edit"></a>
                    <form action="{% url 'delete_task' task.id %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="fas fa-trash" style="border:none;background:none;color:red;" onclick="return confirm('Tem certeza que deseja excluir esta tarefa?');"></button>
                    </form>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock conteudo %}
