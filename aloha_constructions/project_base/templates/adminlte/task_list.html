{% extends 'adminlte/base.html' %}
{% load static %}

{% block conteudo %}
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i class="ion ion-clipboard mr-1"></i>
            To Do List
        </h3>
    </div>
    <div class="card-body">
        <a href="{% url 'new_task' %}" class="btn btn-primary mb-2">Nova Tarefa</a>
        <ul class="todo-list" data-widget="todo-list">
            {% for task in tasks %}
            <li>
                <span class="handle">
                    <i class="fas fa-ellipsis-v"></i>
                    <i class="fas fa-ellipsis-v"></i>
                </span>
                <div class="icheck-primary d-inline ml-2">
                    <input type="checkbox" value="" name="{{ task.id }}" id="todoCheck{{ task.id }}">
                    <label for="todoCheck{{ task.id }}"></label>
                </div>
                <span class="text">{{ task.text }}</span>
                <small class="badge badge-{{ task.label_color }}"><i class="far fa-clock"></i> {{ task.estimated_time }}</small>

                <!-- Botão de editar -->
                <a href="{% url 'edit_task' task.id %}" class="btn btn-warning btn-sm ml-2">Editar</a>
                
                <!-- Botão de excluir -->
                <form action="{% url 'delete_task' task.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-sm ml-2" onclick="return confirm('Tem certeza que deseja excluir esta tarefa?');">Excluir</button>
                </form>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock conteudo %}
